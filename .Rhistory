install.pacakges("shiny")
install.pacakge(c("shiny", "plotly"))
install.package(c("shiny", "plotly"))
install.packages(c("shiny", "plotly"))
bp=read_excel("construction_data.xlsx", sheet = 1)
library(readxl)
library(tidyr)
library(dplyr)
bp=read_excel("construction_data.xlsx", sheet = 1)
View(bp)
names(bp)
head(bp)
str(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)
names(bp)
library(stringr)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -1,-2)))%>%
select(county, place, month, year, permits=value)
)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -1,-2))))%>%
select(county, place, month, year, permits=value)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, permits=value)
co=read_excel("construction_data.xlsx", sheet = 2)
View(co)
names(co)
co=read_excel("construction_data.xlsx", sheet = 2)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, certs=value)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, certs=value)
demo=read_excel("construction_data.xlsx", sheet = 3)
head(demo)
names(demo)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-D1011:-D2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, demo=value)
install.packages(c("tidyverse", "plotly"))
shiny::runApp()
runApp()
runApp()
runApp()
names(area)
names(areas)
runApp()
runApp()
View(areas)
areas=read.csv("RCS County Place names.csv", stringsAsFactors = FALSE)
runApp()
runApp()
names(areas)
runApp()
runApp()
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(county, place, month, year, permits=value)%>%
filter(year<2016)%>%
spread(month, permits)
co=read_excel("construction_data.xlsx", sheet = 2)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(county, place, month, year, certs=value)%>%
filter(year<2016)%>%
spread(month, certs)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-D1011:-D2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(county, place, month, year, demo=value)%>%
filter(year<2016)%>%
spread(month, demo)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="j", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(county, place, half_year, year, mobile=value)%>%
filter(year<2016)%>%
spread(half_year, mobile)
contact=read.csv("contact_info.csv", stringsAsFactors = FALSE)%>%
filter(Plac!=0)%>%
select(county=CouNumber, place=Plac, Area, FirstName=FIRST_NAME, MiddleName=MIDDLE_NAME, LastName=LAST_NAME, Title=TITLE,
Email=EMAIL_ADDRESS, Address=MAIL_ADDRESS, City=MAIL_CITY,ZipCode=MAIL_ZIP, Phone=WORK_PHONE, Fax=FAX)%>%
mutate(id=as.numeric(paste0(county,place)))
areas=read.csv("RCS County Place names.csv", stringsAsFactors = FALSE)%>%
mutate(id=as.numeric(paste0(countyfips,placefips)))
areas
head(areas)
head(bp)
runApp()
runApp()
runApp()
head(areas)
head(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
head(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2016)%>%
spread(month, permits)
head(bp)
runApp()
head(areas)
head(areas, n=10)
head(contact, n=10)
runApp()
runApp()
filter(bp, id==71760)
runApp()
str(bp)
str(areas)
