View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2018)%>%
spread(month, permits)
View(contact)
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
library(car)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2018)%>%
spread(month, permits)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")
View(bp)
bp16=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2018)%>%
spread(month, permits)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2018)%>%
spread(month, permits)
View(bp16)
View(bp)
shiny::runApp()
runApp()
runApp()
bpl <- read.csv("BPLong_All.csv")
View(bpl)
View(bp)
bpl <- filter(place!=0)
bpl <- filter(PlaceFIPS!=0)
View(bpl)
bpl <- filter(bpl$PlaceFIPS!=0)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS=0)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS!=0)
View(bpl)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
View(bp)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS!=0)%>%
gather(variable, value)
View(bpl)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS!=0)%>%
gather(variable, value, -COUNTYFIPS:-PlaceFIPS)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS!=0)%>%
gather(variable, value, -CountyFIPS:-PlaceFIPS)
View(bpl)
bpl=read.csv("BPLong_All.csv")%>%
filter(PlaceFIPS!=0)
View(bpl)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")
View(bp)
bpl=read.csv("BPLong_All.csv")%>%
filter(place!="00000")
View(bpl)
View(bpl)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
library(car)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)
View(bp)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
filter(place!="00000")
View(bpl)
bp=read_excel("construction_data.xlsx", sheet = 5)
View(bp)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
filter(place!="00000")
bpl=read_excel("BPLong_All.xlsx", sheet = 1)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
filter(place!="00000")
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
subset(place!="00000")
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
subset(bpl, place!="00000")
View(bpl)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)
subset(bpl, place!="00000")
View(bpl)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(bpl, place!="00000")
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")
View(bpl)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))
View(bp)
View(bpl)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
bpl$monthyear = paste0(monthname,year)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
bpl$MonthYear = paste0(MonthName,Year)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
bpl$MonthYear = paste0(bpl$MonthName,bpl$Year)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
bpl["MonthYear"] = NA
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=str_sub(str_sub(month, 1,3)))
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=str_sub(str_sub(month, 1,3)),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=str_sub(str_sub(month, 1,3)),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2017)%>%
spread(month, permits)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2017)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=str_sub(str_sub(month, 1,3)),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)
spread(month, permits)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=tolower(str_sub(str_sub(month, 1,3))),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
spread(month, permits)
bp=read_excel("construction_data.xlsx", sheet = 5)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
filter(place!="00000")%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
year=as.integer(paste0("20", str_sub(variable, -2,-1))),
county=as.numeric(county),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
filter(year<2017)%>%
spread(month, permits)
bpl=read_excel("BPLong_All.xlsx", sheet = 1)%>%
#select(-CountyFIPS:-PlaceFIPS)%>%
subset(place!="00000")%>%
mutate(month=tolower(str_sub(str_sub(month, 1,3))),
month=ordered(month, levels=c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec")),
place=as.numeric(place),
id=as.numeric(paste0(county,place)))%>%
select(id, county, place, month, year, permits=value)%>%
spread(month, permits)
shiny::runApp()
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
library(car)
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
sdo=read.csv("rcs_sdo17.csv", stringsAsFactors = FALSE)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(year=paste0("20", str_sub(variable, -2,-1)),
variable=str_sub(variable,1,-3))%>%
spread(variable, value)%>%
select(county, place, year, Population=Tp, HousingUnits=Thu)%>%
mutate(id=as.numeric(paste0(county,place)))
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
library(car)
sdo=read.csv("rcs_sdo17.csv", stringsAsFactors = FALSE)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(year=paste0("20", str_sub(variable, -2,-1)),
variable=str_sub(variable,1,-3))%>%
spread(variable, value)%>%
select(county, place, year, Population=Tp, HousingUnits=Thu)%>%
mutate(id=as.numeric(paste0(county,place)))
sdo=read.csv("rcs_sdo17.csv", stringsAsFactors = FALSE)
View(sdo)
sdo=read.csv("rcs_sdo17.csv", stringsAsFactors = FALSE)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(year=paste0("20", str_sub(variable, -2,-1)),
variable=str_sub(variable,1,-3))%>%
spread(variable, value)%>%
select(county, place, year, Population=Tp, HousingUnits=Thu)%>%
mutate(id=as.numeric(paste0(county,place)))
View(sdo)
shiny::runApp()
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
library(car)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
View(census_h)
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
census_p=read.csv("rcs_census17.csv", stringsAsFactors = FALSE)%>%
rename(county=COUNTY, place=PLACE)%>%
gather(variable, Population, -county, -place)%>%
mutate(year=str_sub(variable, -4,-1))%>%
select(county, place, year, Population)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
census=inner_join(census_p, census_h)%>%
mutate(id=as.numeric(paste0(county,place)))
View(census)
View(census)
runApp()
runApp()
runApp()
runApp()
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
runApp()
census_h17=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
View(census_h17)
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, as.numeric(HousingUnits),as.numeric(Permits))
census_h=read.csv("rcs_census_housing17a.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, as.numeric(HousingUnits),as.numeric(Permits))
census_h=read.csv("rcs_census_housing17a.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
View(census_h17)
census_h=read.csv("rcs_census_housing.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
census_h17=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h17)
runApp()
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)%>%
as.numeric(census_h$HousingUnits, census_h$Permits)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)%>%
as.numeric(census_h$HousingUnits)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)%>%
transform(census_h, as.numeric(HousingUnits))
View(census_h)
census_h=read.csv("rcs_census_housing17.csv", stringsAsFactors = FALSE)%>%
gather(variable, value, -county, -place)%>%
separate(variable, into=c("variable", "year"), sep="_")%>%
spread(variable, value)%>%
rename(HousingUnits=hu, Permits=perm)%>%
select(county, place, year, HousingUnits,Permits)
View(census_h)
runApp()
runApp()
