install.pacakges("shiny")
install.pacakge(c("shiny", "plotly"))
install.package(c("shiny", "plotly"))
install.packages(c("shiny", "plotly"))
bp=read_excel("construction_data.xlsx", sheet = 1)
library(readxl)
library(tidyr)
library(dplyr)
bp=read_excel("construction_data.xlsx", sheet = 1)
View(bp)
names(bp)
head(bp)
str(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)
names(bp)
library(stringr)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -1,-2)))%>%
select(county, place, month, year, permits=value)
)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -1,-2))))%>%
select(county, place, month, year, permits=value)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, permits=value)
co=read_excel("construction_data.xlsx", sheet = 2)
View(co)
names(co)
co=read_excel("construction_data.xlsx", sheet = 2)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, certs=value)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, certs=value)
demo=read_excel("construction_data.xlsx", sheet = 3)
head(demo)
names(demo)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-D1011:-D2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, demo=value)
mobile=read_excel("construction_data.xlsx", sheet = 4)
library(readxl)
library(tidyr)
library(dplyr)
library(stringr)
mobile=read_excel("construction_data.xlsx", sheet = 4)
View(mobile)
names(mobile)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="J", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, half_year, year, mobile=value)
construction=inner_join(bp,co)%>%
inner_join(demo)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, permits=value)%>%
spread(year, permits)
View(bp)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, permits=value)%>%
filter(year<2016)%>%
spread(year, permits)
co=read_excel("construction_data.xlsx", sheet = 2)%>%
select(-C1011:-C2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, certs=value)%>%
filter(year<2016)%>%
spread(year, certs)
demo=read_excel("construction_data.xlsx", sheet = 3)%>%
select(-D1011:-D2021)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, demo=value)%>%
filter(year<2016)%>%
spread(year, demo)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="J", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, half_year, year, mobile=value)%>%
filter(year<2016)%>%
spread(year, mobile)
View(mobile)
bp=read_excel("construction_data.xlsx", sheet = 1)%>%
select(-Btot2010:-PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(month=str_sub(str_sub(variable, 1,4),2,4),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, month, year, permits=value)%>%
filter(year<2016)%>%
spread(month, permits)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="J", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, half_year, year, mobile=value)%>%
filter(year<2016)%>%
spread(month, mobile)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="J", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, half_year, year, mobile=value)%>%
filter(year<2016)%>%
spread(half_year, mobile)
View(mobile)
mobile=read_excel("construction_data.xlsx", sheet = 4)%>%
rename(county=CountyFIPS, place=PlaceFIPS)%>%
gather(variable, value, -county:-place)%>%
mutate(half_year=ifelse(str_sub(str_sub(variable, 4, 6), 1,1)=="j", "first", "second"),
year=as.integer(paste0("20", str_sub(variable, -2,-1))))%>%
select(county, place, half_year, year, mobile=value)%>%
filter(year<2016)%>%
spread(half_year, mobile)
View(mobile)
shiny::runApp()
install.packages("ggplot2")
runApp()
contact=read.csv("contact_info.csv", stringsAsFactors = FALSE)
head contact
head(contact)
contact=read.csv("contact_info.csv", stringsAsFactors = FALSE)%>%
filter(Plac!=0)
head(contact)
View(mobile)
contact=read.csv("contact_info.csv", stringsAsFactors = FALSE)%>%
filter(Plac!=0)%>%
select(county=CouNumber, place=Plac, Area, FirstName=FIRST_NAME, MiddleName=MIDDLE_NAME, LastName=LAST_NAME, Title=TITLE,
Email=EMAIL_ADDRESS, Address=MAIL_ADDRESS, City=MAIL_CITY,ZipCode=MAIL_ZIP, Phone=WORK_PHONE, Fax=FAX)
runApp()
runApp()
runApp()
